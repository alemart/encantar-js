/*!
 * A-Frame scan gimmick for encantar.js
 * @version 1.2.0
 * @author Alexandre Martins (https://encantar.dev)
 * @license LGPL-3.0-or-later
 */(function(){const i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAVklEQVRYR+2WMQ4AIAgD4f+PVlzFYGSpw3UlQHOaBjexXLzfMJAIjFD1LB6q6q/9RwO3Jd1/s8ztszEAAQiQhBCAAARIQghA4E8C0rO8e3J3+4hiOYEJMwaAIT1kBDMAAAAASUVORK5CYII=";AFRAME.registerPrimitive("ar-scan-gimmick",{defaultComponents:{"ar-scan-gimmick":{}},mappings:{src:"ar-scan-gimmick.src",opacity:"ar-scan-gimmick.opacity"}}),AFRAME.registerComponent("ar-scan-gimmick",{schema:{src:{type:"string",default:""},opacity:{type:"number",default:1}},init(){const t=this.el.sceneEl,e=t.systems.ar;this._ar=e,this._img=null,this._hadGizmos=!1,this._onTargetFound=this._onTargetFound.bind(this),this._onTargetLost=this._onTargetLost.bind(this),this._registerEvents(),t.addEventListener("arready",()=>{this._validate();const s=e.session;this._hadGizmos=s.gizmos.visible;const n=this._createImage();this.el.parentNode.appendChild(n),this._img=n})},remove(){this._img!==null&&(this._unregisterEvents(),this.el.parentNode.removeChild(this._img),this._img=null)},_registerEvents(){const t=this.el.sceneEl;t.addEventListener("artargetfound",this._onTargetFound),t.addEventListener("artargetlost",this._onTargetLost)},_unregisterEvents(){const t=this.el.sceneEl;t.removeEventListener("artargetlost",this._onTargetLost),t.removeEventListener("artargetfound",this._onTargetFound)},_onTargetFound(t){const e=this._ar,s=this._img;e.session.gizmos.visible=!1,s.style.display="none"},_onTargetLost(t){const e=this._ar,s=this._img;e.session.gizmos.visible=this._hadGizmos,s.style.display="inline-block"},_createImage(){const t=document.createElement("img"),e=this.data.src!==""?this.data.src:i;return t.src=e,t.draggable=!1,t.style.width="100%",t.style.height="100%",t.style.objectFit="contain",t.style.pointerEvents="none",t.style.display="inline-block",t.style.opacity=this.data.opacity,e===i&&(t.style.imageRendering="pixelated"),t},_validate(){this.el.parentNode.getAttribute("ar-hud")||console.error("a-entity with ar-scan-gimmick must be a direct child of ar-hud")}})})();
